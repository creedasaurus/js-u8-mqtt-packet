import { _mqtt_raw_pkt_dispatch } from './framing.jsy'
import { mqtt_decode_ops_by_id } from './_decode_all.jsy'


export const _mqtt_pkt_id_dispatch = disp_parser =>
  _mqtt_raw_pkt_dispatch @\ pkt ::
    const fn_disp = disp_parser[pkt.type_obj.id]
    return undefined !== fn_disp
      ? fn_disp.call(disp_parser, pkt)
      : disp_parser[0](pkt)


export const mqtt_decode_session =
  _mqtt_pkt_id_dispatch @
    mqtt_decode_ops_by_id

